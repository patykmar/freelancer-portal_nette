<?phpnamespace App\Grids\Admin;use Nette\Application\UI\Presenter;use Nette\Database\Table\Selection;use NiftyGrid\DataSource\NDataSource;use NiftyGrid\DuplicateButtonException;use NiftyGrid\DuplicateColumnException;use NiftyGrid\Grid;/** * Description of PolozkyFakturyGrid * @deprecated * @author Martin Patyk */class PolozkyFakturyGrid extends Grid{    use AdminGridButtonTrait;    private $model;    public function __construct(Selection $db)    {        parent::__construct();        $this->model = $db;    }    /**     * @param Presenter $presenter     * @throws DuplicateButtonException     * @throws DuplicateColumnException     */    protected function configure($presenter)    {        $this->model->where("faktura = ?", $presenter->params['id']);        //Vytvoříme si zdroj dat pro Grid        //Při výběru dat vždy vybereme id        $source = new NDataSource($this->model            ->select('faktura_polozka.id AS id')            ->select('cssclass')            ->select('faktura_polozka.nazev')            ->select('CONCAT(dph.procent,"%") AS procent')            ->select('CONCAT(pocet_polozek,jednotka.zkratka) AS pocet_polozek')            ->select('cena')            ->select('koeficient_cena')            ->select('sleva')            ->select('ROUND(pocet_polozek*cena*dph.koeficient*koeficient_cena*(1-(sleva*0.01)),2) AS cena_celkem')        );        $this->addColumn('id', 'ID');        $this->addColumn('nazev', 'Název');        $this->addColumn('cssclass', 'cssclass');        $this->addColumn('procent', 'DPH');        $this->addColumn('pocet_polozek', 'Pocet');        $this->addColumn('koeficient_cena', 'Koeficient');        $this->addColumn('sleva', 'Sleva');        $this->addColumn('cena', 'Cena/jednotka');        $this->addColumn('cena_celkem', 'Cena celkem');        $this->setDefaultOrder("faktura_polozka.id ASC");        $this->editButton($presenter);        $this->deleteButton($presenter);        //Předáme zdroj        $this->setDataSource($source);    }}